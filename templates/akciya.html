{% extends 'base.html' %}

{% block title %}–ê–∫—Ü–∏–∏ - –≠–ø–∏–∫—É—Ä–µ–π{% endblock %}

{% block content %}
<div class="promo-banner">
    <h2>üî• –ì–æ—Ä—è—á–∏–µ –∞–∫—Ü–∏–∏!</h2>
    <p>–¢–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –Ω–∞—à–∏ –ª—É—á—à–∏–µ –±–ª—é–¥–∞</p>
</div>

<!-- –ü—Ä–æ–º–æ–∫–æ–¥—ã -->
{% if –ø—Ä–æ–º–æ–∫–æ–¥—ã %}
<div style="background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 2rem;">
    <h2 style="margin-bottom: 1rem;">üéÅ –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        {% for –ø—Ä–æ–º–æ–∫–æ–¥ in –ø—Ä–æ–º–æ–∫–æ–¥—ã %}
        <div style="padding: 1.5rem; background: linear-gradient(135deg, #ffeaa7, #fab1a0); border-radius: 10px;">
            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">
                {{ –ø—Ä–æ–º–æ–∫–æ–¥.–∫–æ–¥ }}
            </div>
            <div style="margin-bottom: 0.5rem;">–°–∫–∏–¥–∫–∞ {{ –ø—Ä–æ–º–æ–∫–æ–¥.—Å–∫–∏–¥–∫–∞ }}%</div>
            <div style="font-size: 0.9rem; color: #636e72;">
                –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: {{ –ø—Ä–æ–º–æ–∫–æ–¥.—Å—Ä–æ–∫_–¥–µ–π—Å—Ç–≤–∏—è|date:"d.m.Y" }}
            </div>
            {% if –ø—Ä–æ–º–æ–∫–æ–¥.–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è_—Å—É–º–º–∞ > 0 %}
            <div style="font-size: 0.8rem; color: #636e72;">
                –ú–∏–Ω. —Å—É–º–º–∞: {{ –ø—Ä–æ–º–æ–∫–æ–¥.–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è_—Å—É–º–º–∞ }} ‚ÇΩ
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<h1 class="page-title">üçΩÔ∏è –ë–ª—é–¥–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π</h1>

<div class="dishes-grid">
    {% for dish in promotion_dishes %}
    <div class="dish-card">
        {% if dish.–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ %}
        <img src="{{ dish.–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ }}" alt="{{ dish.–Ω–∞–∑–≤–∞–Ω–∏–µ }}" class="dish-image">
        {% else %}
        <div class="dish-image" style="background: #ddd; display: flex; align-items: center; justify-content: center; color: #999;">
            üçΩÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        </div>
        {% endif %}

        <div class="dish-info">
            <h3 class="dish-name">{{ dish.–Ω–∞–∑–≤–∞–Ω–∏–µ }}</h3>
            <p class="dish-description">{{ dish.–æ–ø–∏—Å–∞–Ω–∏–µ }}</p>

            <div class="dish-price">
                <span class="current-price">{{ dish.—Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ }} ‚ÇΩ</span>
                <span class="original-price">{{ dish.—Ü–µ–Ω–∞ }} ‚ÇΩ</span>
                <span class="discount-badge">-{{ dish.–ø—Ä–æ—Ü–µ–Ω—Ç_—Å–∫–∏–¥–∫–∏ }}%</span>
            </div>

            <!-- –†–µ–π—Ç–∏–Ω–≥ -->
            <div style="margin: 0.5rem 0; color: #fdcb6e;">
                {% with rating=dish.—Å—Ä–µ–¥–Ω–∏–π_—Ä–µ–π—Ç–∏–Ω–≥ %}
                {% for i in "12345" %}
                    {% if forloop.counter <= rating %}
                        ‚òÖ
                    {% else %}
                        ‚òÜ
                    {% endif %}
                {% endfor %}
                <small style="color: #636e72;">({{ dish.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—Ç–∑—ã–≤–æ–≤ }})</small>
                {% endwith %}
            </div>

            <div class="dish-actions">
                {% if user.is_authenticated %}
                    <button onclick="addToCart({{ dish.id }})" class="btn btn-primary">
                        üõí –í –∫–æ—Ä–∑–∏–Ω—É
                    </button>
                    <a href="{% url '–¥–æ–±–∞–≤–∏—Ç—å_–≤_–∏–∑–±—Ä–∞–Ω–Ω–æ–µ' dish.id %}" class="btn btn-outline">
                        ‚ù§Ô∏è
                    </a>
                {% else %}
                    <a href="{% url 'login' %}" class="btn btn-primary">
                        üîë –í–æ–π–¥–∏—Ç–µ —á—Ç–æ–±—ã –∑–∞–∫–∞–∑–∞—Ç—å
                    </a>
                {% endif %}
                <a href="{% url 'dish_detail' dish.slug %}" class="btn btn-secondary">
                    üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <div style="text-align: center; grid-column: 1 / -1; color: #636e72; padding: 3rem;">
        <h3>üòî –ê–∫—Ü–∏–æ–Ω–Ω—ã—Ö –±–ª—é–¥ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
        <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏, —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –∞–∫—Ü–∏–∏!</p>
    </div>
    {% endfor %}
</div>
{% endblock %}