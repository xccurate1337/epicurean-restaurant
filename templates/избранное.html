{% extends 'base.html' %}

{% block title %}–ò–∑–±—Ä–∞–Ω–Ω–æ–µ - –≠–ø–∏–∫—É—Ä–µ–π{% endblock %}

{% block content %}
<h1 class="page-title">‚ù§Ô∏è –í–∞—à–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</h1>

{% if –∏–∑–±—Ä–∞–Ω–Ω—ã–µ %}
<div class="dishes-grid">
    {% for –∏–∑–±—Ä–∞–Ω–Ω–æ–µ in –∏–∑–±—Ä–∞–Ω–Ω—ã–µ %}
    {% with dish=–∏–∑–±—Ä–∞–Ω–Ω–æ–µ.–±–ª—é–¥–æ %}
    <div class="dish-card">
        {% if dish.–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ %}
        <img src="{{ dish.–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ }}" alt="{{ dish.–Ω–∞–∑–≤–∞–Ω–∏–µ }}" class="dish-image">
        {% else %}
        <div class="dish-image" style="background: #ddd; display: flex; align-items: center; justify-content: center; color: #999;">
            üçΩÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        </div>
        {% endif %}
        
        <div class="dish-info">
            <h3 class="dish-name">{{ dish.–Ω–∞–∑–≤–∞–Ω–∏–µ }}</h3>
            <p class="dish-description">{{ dish.–æ–ø–∏—Å–∞–Ω–∏–µ }}</p>
            
            <div class="dish-price">
                {% if dish.–∞–∫—Ü–∏—è %}
                    <span class="current-price">{{ dish.—Ç–µ–∫—É—â–∞—è_—Ü–µ–Ω–∞ }} ‚ÇΩ</span>
                    <span class="original-price">{{ dish.—Ü–µ–Ω–∞ }} ‚ÇΩ</span>
                    <span class="discount-badge">-{{ dish.–ø—Ä–æ—Ü–µ–Ω—Ç_—Å–∫–∏–¥–∫–∏ }}%</span>
                {% else %}
                    <span class="current-price">{{ dish.—Ü–µ–Ω–∞ }} ‚ÇΩ</span>
                {% endif %}
            </div>

            <!-- –†–µ–π—Ç–∏–Ω–≥ -->
            <div style="margin: 0.5rem 0; color: #fdcb6e;">
                {% with rating=dish.—Å—Ä–µ–¥–Ω–∏–π_—Ä–µ–π—Ç–∏–Ω–≥ %}
                {% for i in "12345" %}
                    {% if forloop.counter <= rating %}
                        ‚òÖ
                    {% else %}
                        ‚òÜ
                    {% endif %}
                {% endfor %}
                <small style="color: #636e72;">({{ dish.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—Ç–∑—ã–≤–æ–≤ }})</small>
                {% endwith %}
            </div>

            <div class="dish-actions">
                <button onclick="addToCart({{ dish.id }})" class="btn btn-primary">
                    üõí –í –∫–æ—Ä–∑–∏–Ω—É
                </button>
                <a href="{% url '–¥–æ–±–∞–≤–∏—Ç—å_–≤_–∏–∑–±—Ä–∞–Ω–Ω–æ–µ' dish.id %}" class="btn" style="background: #ff7675; color: white;">
                    üíî –£–¥–∞–ª–∏—Ç—å
                </a>
                <a href="{% url 'dish_detail' dish.slug %}" class="btn btn-secondary">
                    üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                </a>
            </div>
        </div>
    </div>
    {% endwith %}
    {% endfor %}
</div>
{% else %}
<div style="text-align: center; padding: 4rem;">
    <h2 style="color: #636e72; margin-bottom: 1rem;">üíî –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø—É—Å—Ç–æ</h2>
    <p style="color: #636e72; margin-bottom: 2rem;">–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è –±–ª—é–¥–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!</p>
    <a href="{% url 'home' %}" class="btn btn-primary">üçΩÔ∏è –ü–µ—Ä–µ–π—Ç–∏ –∫ –º–µ–Ω—é</a>
</div>
{% endif %}
{% endblock %}